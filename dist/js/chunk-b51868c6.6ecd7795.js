(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b51868c6"],{"0d62":function(t,a,e){},"0fea":function(t,a,e){"use strict";e.d(a,"g",(function(){return s})),e.d(a,"e",(function(){return o})),e.d(a,"h",(function(){return d})),e.d(a,"f",(function(){return l})),e.d(a,"m",(function(){return r})),e.d(a,"k",(function(){return u})),e.d(a,"i",(function(){return c})),e.d(a,"l",(function(){return _})),e.d(a,"j",(function(){return p})),e.d(a,"p",(function(){return h})),e.d(a,"q",(function(){return m})),e.d(a,"o",(function(){return g})),e.d(a,"r",(function(){return f})),e.d(a,"n",(function(){return b})),e.d(a,"c",(function(){return y})),e.d(a,"a",(function(){return D})),e.d(a,"d",(function(){return v})),e.d(a,"b",(function(){return k}));var i=e("b775"),n={sys_dict_page:"/admin/sys_dict_page",sys_dict_layer_top:"/admin/sys_dict_layer_top",sys_dict_add:"/admin/sys_dict_add",sys_dict_update:"/admin/sys_dict_update",sys_dict_delete:"/admin/sys_dict_remove",sys_permission_page:"/admin/sys_permission_page",sys_permission_add:"/admin/sys_permission_add",sys_permission_update:"/admin/sys_permission_update",sys_permission_delete:"/admin/sys_permission_remove",sys_role_page:"/admin/sys_role_page",sys_role_add:"/admin/sys_role_add",sys_role_update:"/admin/sys_role_update",sys_role_delete:"/admin/sys_role_delete",sys_permission_all:"/admin/sys_permission_all",sys_permission_layer_top:"/admin/sys_permission_layer_top",sys_user_page:"/admin/sys_user_page",sys_user_add:"/admin/sys_user_add",sys_user_update:"/admin/sys_user_update",sys_user_remove:"/admin/sys_user_remove",sys_role_layer_top:"/admin/sys_role_layer_top",user:"/admin/user",role:"/admin/role",service:"/service",permission:"/permission",permissionNoPager:"/permission/no-pager",orgTree:"/org/tree"};function s(t){return Object(i["b"])({url:n.sys_permission_page,method:"post",data:t})}function o(t){return Object(i["b"])({url:n.sys_permission_add,method:"post",data:t})}function d(t){return Object(i["b"])({url:n.sys_permission_update,method:"post",data:t})}function l(t){return Object(i["b"])({url:n.sys_permission_delete,method:"post",data:t})}function r(t){return Object(i["b"])({url:n.sys_permission_layer_top,method:"post",data:t})}function u(t){return Object(i["b"])({url:n.sys_role_page,method:"post",data:t})}function c(t){return Object(i["b"])({url:n.sys_role_add,method:"post",data:t})}function _(t){return Object(i["b"])({url:n.sys_role_update,method:"post",data:t})}function p(t){return Object(i["b"])({url:n.sys_role_delete,method:"post",data:t})}function h(t){return Object(i["b"])({url:n.sys_user_page,method:"post",data:t})}function m(t){return Object(i["b"])({url:n.sys_user_remove,method:"post",data:t})}function g(t){return Object(i["b"])({url:n.sys_user_add,method:"post",data:t})}function f(t){return Object(i["b"])({url:n.sys_user_update,method:"post",data:t})}function b(t){return Object(i["b"])({url:n.sys_role_layer_top,method:"post",data:t})}function y(t){return Object(i["b"])({url:n.sys_dict_page,method:"post",data:t})}function D(t){return Object(i["b"])({url:n.sys_dict_add,method:"post",data:t})}function v(t){return Object(i["b"])({url:n.sys_dict_update,method:"post",data:t})}function k(t){return Object(i["b"])({url:n.sys_dict_delete,method:"post",data:t})}},"4b07":function(t,a,e){"use strict";var i=e("0d62"),n=e.n(i);n.a},"5ed2":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dataBody"},[e("a-form",{attrs:{layout:"inline"}},[e("a-form-item",[e("a-input",{attrs:{placeholder:"请输入名称",allowClear:!0},model:{value:t.queryData.name,callback:function(a){t.$set(t.queryData,"name",a)},expression:"queryData.name"}})],1),e("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[e("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:t.fetch_no_page}},[t._v(" 查询 ")])],1)],1),e("div",{staticClass:"operate"},[e("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus"},on:{click:t.addData}},[t._v("添加")])],1),e("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.data,pagination:t.pagination,loading:t.loading,indentSize:15,childrenColumnName:"childs"},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(a){return[e("div",{staticStyle:{width:"110px"}},[e("a",{staticStyle:{"padding-right":"5px"},on:{click:function(e){return t.handleAddChild({parent_id:a.id})}}},[t._v("添加下级")]),e("a-dropdown",[e("a",{staticClass:"ant-dropdown-link"},[t._v(" 更多 "),e("a-icon",{attrs:{type:"down"}})],1),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e("a-menu-item",[e("a",{staticStyle:{color:"#1890ff"},on:{click:function(e){return t.handleEdit(a)}}},[t._v("编辑")])]),e("a-menu-item",[e("a",{staticStyle:{color:"#f5222d"},on:{click:function(e){return t.handleDelete(a)}}},[t._v("删除")])])],1)],1)],1)]}}])}),t.visible?e("a-modal",{attrs:{title:"add"===t.dialogMode?"添加":"编辑",cancelText:"取消",okText:"确定",width:500,maskClosable:!1},on:{ok:t.handleAddData},model:{value:t.visible,callback:function(a){t.visible=a},expression:"visible"}},[e("a-form",t._b({attrs:{labelAlign:"right"}},"a-form",{labelCol:{sm:{span:4}},wrapperCol:{sm:{span:20}}},!1),[e("a-form-item",{attrs:{label:t.dialogData.is_menu?"菜单名称":"权限名称"}},[e("a-input",{attrs:{placeholder:t.dialogData.is_menu?"菜单名称":"权限名称"},model:{value:t.dialogData.name,callback:function(a){t.$set(t.dialogData,"name",a)},expression:"dialogData.name"}})],1),e("a-form-item",{attrs:{label:"父级(选填)"}},[e("a-input",{attrs:{placeholder:"父级id"},model:{value:t.dialogData.parent_id,callback:function(a){t.$set(t.dialogData,"parent_id",a)},expression:"dialogData.parent_id"}}),e("a-tag",[t._v("权限集")]),t.loading_all_res?e("a-spin"):t._e(),e("a-tree",{attrs:{disabled:t.loading_all_res,"replace-fields":{children:"childs",title:"name",key:"id"},"auto-expand-parent":!0,"tree-data":t.all_res,checkable:"",checkStrictly:!0},on:{check:t.onResCheck},model:{value:t.dialogData.resource_ids,callback:function(a){t.$set(t.dialogData,"resource_ids",a)},expression:"dialogData.resource_ids"}})],1),e("a-form-item",{attrs:{label:"标识"}},[e("a-input",{attrs:{placeholder:"菜单、权限标识"},model:{value:t.dialogData.permission,callback:function(a){t.$set(t.dialogData,"permission",a)},expression:"dialogData.permission"}})],1),e("a-form-item",{attrs:{label:"是否菜单"}},[e("a-row",[e("a-col",[e("a-switch",{attrs:{"checked-children":"菜单","un-checked-children":"权限"},on:{change:function(a){!1===a&&(t.dialogData.path="")}},model:{value:t.dialogData.is_menu,callback:function(a){t.$set(t.dialogData,"is_menu",a)},expression:"dialogData.is_menu"}})],1),e("a-col",[e("a-input",{attrs:{disabled:!t.dialogData.is_menu,placeholder:"填写路径为菜单！"},model:{value:t.dialogData.path,callback:function(a){t.$set(t.dialogData,"path",a)},expression:"dialogData.path"}})],1)],1)],1)],1)],1):t._e()],1)},n=[],s=(e("d3b7"),e("5530")),o=e("0fea"),d=e("25a9"),l=[{title:"id",dataIndex:"id"},{title:"名称",dataIndex:"name"},{title:"权限标识",dataIndex:"permission"},{title:"路由",dataIndex:"path"},{title:"创建时间",dataIndex:"create_date"},{title:"操作",scopedSlots:{customRender:"action"}}],r={mounted:function(){this.fetch()},data:function(){return{data:[],pagination:{},loading:!1,columns:l,queryData:{id:null,name:null,page_no:1,page_size:5},dialogData:{id:null,value:null,is_menu:!1,resource_ids:[]},visible:!1,dialogMode:"add",all_res:[],loading_all_res:!1}},methods:{handleTableChange:function(t,a,e){var i=Object(s["a"])({},this.pagination);i.current=t.current,i.pageSize=5,this.pagination=i,this.queryData.page_no=t.current,this.fetch()},fetch_no_page:function(){this.pagination.current=1,this.queryData.page_no=1,this.queryData.page_size=5,this.fetch()},fetch:function(){var t=this;this.loading=!0;var a=Object.assign({},this.queryData);null!=a.time_start&&(a.time_start=a.time_start.format("YYYY-MM-DDThh:mm:ss")),null!=a.time_end&&(a.time_end=a.time_end.format("YYYY-MM-DDThh:mm:ss")),Object(o["g"])(a).then((function(a){var e=Object(s["a"])({},t.pagination);t.loading=!1,t.data=a.data.records,e.total=a.data.total,e.pageSize=a.data.page_size,t.pagination=e}))},addData:function(){this.handleDialogCancel(),this.getAllRes(),this.visible=!0,this.dialogMode="add"},handleAddData:function(){var t=this;!1===this.dialogData.is_menu&&(this.dialogData.path=null),"add"===this.dialogMode?Object(o["e"])(this.dialogData).then((function(a){Object(d["a"])(t,a),t.visible=!1,t.fetch()})):"edit"===this.dialogMode&&Object(o["h"])(this.dialogData).then((function(a){t.visible=!1,t.fetch()}))},handleAddChild:function(t){this.getAllRes(),this.visible=!0,this.dialogMode="add",this.dialogData=Object.assign({is_menu:null===t.path,resource_ids:[]},t),""===this.dialogData.parent_id&&(this.dialogData.parent_id=null),null!==t.parent_id&&(this.dialogData.resource_ids=[t.parent_id])},handleEdit:function(t){this.getAllRes(t.id),this.visible=!0,this.dialogMode="edit",this.dialogData=Object.assign({is_menu:null===t.path,resource_ids:[]},t),null!==t.parent_id&&(this.dialogData.resource_ids=[t.parent_id]),""===this.dialogData.parent_id&&(this.dialogData.parent_id=null),null===this.dialogData.path?this.dialogData.is_menu=!1:this.dialogData.is_menu=!0},handleDelete:function(t){var a=this;this.$confirm({title:"你确定要删除?",content:"你确定要删除！",onOk:function(){Object(o["f"])(t).then((function(t){Object(d["a"])(a,t),a.visible=!1,a.fetch()}))},onCancel:function(){},class:"test"})},handleDialogCancel:function(){this.dialogData={id:null,remark:null,value:null,is_menu:!1,resource_ids:[]}},onResCheck:function(t){var a=t.checked.length;a>=1?(this.dialogData.resource_ids={checked:[t.checked[a-1]],halfChecked:[]},this.dialogData.parent_id=t.checked[a-1]):(this.dialogData.resource_ids=[],this.dialogData.parent_id=null)},getAllRes:function(t){var a=this;this.loading_all_res=!0,Object(o["m"])({}).then((function(e){a.loading_all_res=!1;for(var i=[],n=0;n<e.data.length;n++){var s=e.data[n];void 0!==t&&null!==t&&s.id===t||i.push(s)}a.all_res=i})).catch((function(t){a.loading_all_res=!1}))}}},u=r,c=(e("4b07"),e("2877")),_=Object(c["a"])(u,i,n,!1,null,null,null);a["default"]=_.exports}}]);